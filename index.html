<!DOCTYPE html>
<html>
<style>
#container {
  <!--width: 200px;
  height:540px;-->
  border: 1px solid red;
  margin: 0px auto;
  text-align: center;
}
</style>
<body>
<div id="container">
<canvas id="myCanvas" width="200px" height="540px" style="border:1px solid #d3d3d3;">
</canvas>
</div>
<script>
function deviceOrientationListener(event) {
     var c=document.getElementById("myCanvas");
	 var d=document.getElementById("container");
	 c.height=window.innerHeight-20;
	 d.style.height=window.innerHeight-20;
	 c.width=window.innerWidth/2-20;
	 d.style.width=window.innerWidth/2-20;
	 var orientation="portrait";
	 var speed=0;
	 var factor=54
     if(window.orientation == -90 || window.orientation == 90) orientation = "landscape";
     var ctx=c.getContext("2d");
	 ctx.font = "30px Arial";
     ctx.clearRect(0,0, c.width, c.height);
     /*ctx.fillStyle="#FF7777";
     ctx.font="14px Verdana";
     ctx.fillText("Alpha:" + Math.round(event.alpha) ,10,20);
     ctx.beginPath();
     ctx.moveTo(180, 75);
     ctx.lineTo(210, 75);
     ctx.arc(180,75,60,0, event.alpha*Math.PI/180);
     ctx.fill();

	 ctx.fillStyle="#FF6600";
	 ctx.fillText("Beta:" + Math.round(event.beta),10,140);
     ctx.beginPath();
     ctx.fillRect(180, 150, event.beta, 90);

     ctx.fillStyle="#FF0000";
     ctx.fillText("Gamma:" + Math.round(event.gamma),10,270);
     ctx.beginPath();
     ctx.fillRect(90, 340, 180, event.gamma);*/
	 //Added by Apurba
	if(orientation=="portrait")	 speed= Math.round(event.beta);
	if(orientation=="landscape") speed= Math.round(event.gamma);
	if(speed<0) ctx.fillStyle="#66CC33";
	if(speed>0) ctx.fillStyle="#FF0000";
	if(speed>0)	ctx.fillText("Speed:" + speed,20,c.height/2-speed);
	if(speed<0) ctx.fillText("Speed:" + speed,20,c.height/2-speed+20);
	ctx.beginPath();
	ctx.fillRect(5, c.height/2, c.width-10, speed*-1);
}

function deviceOrientationListenerOld(event) {
     var c=document.getElementById("myCanvas");
	 var orientation="portrait";
     if(window.orientation == -90 || window.orientation == 90) orientation = "landscape";
    document.getElementById("status").innerHTML+=orientation+"<br>";
     var ctx=c.getContext("2d");
     ctx.clearRect(0,0, c.width, c.height);
     ctx.fillStyle="#FF7777";
     ctx.font="14px Verdana";
     ctx.fillText("Alpha:" + Math.round(event.alpha) ,10,20);
     ctx.beginPath();
     ctx.moveTo(180, 75);
     ctx.lineTo(210, 75);
     ctx.arc(180,75,60,0, event.alpha*Math.PI/180);
     ctx.fill();

     ctx.fillStyle="#FF6600";
     ctx.fillText("Beta:" + Math.round(event.beta),10,140);
     ctx.beginPath();
     ctx.fillRect(180, 150, event.beta, 90);

     ctx.fillStyle="#FF0000";
     ctx.fillText("Gamma:" + Math.round(event.gamma),10,270);
     ctx.beginPath();
     ctx.fillRect(90, 340, 180, event.gamma);
	 
	var orientation="portrait";
    if(window.orientation == -90 || window.orientation == 90) orientation = "landscape";
    document.getElementById("status").innerHTML+=orientation+"<br>";
}
/*function orientationChange(e) {
    var orientation="portrait";
    if(window.orientation == -90 || window.orientation == 90) orientation = "landscape";
    document.getElementById("status").innerHTML+=orientation+"<br>";
}*/

if (window.DeviceOrientationEvent) {
   window.addEventListener("deviceorientation", deviceOrientationListener);
   //window.addEventListener("orientationchange", orientationChange, true);
}
else {
    alert("Sorry, your browser doesn't support Device Orientation");
}


</script> 

</body>
</html>
